<h2 class="mb-4 text-center">Cat√°logo de Libros</h2>

<div class="row row-cols-1 row-cols-md-3 g-4">
    {{#each libros}}
    <div class="col">
        <div class="card h-100 shadow-sm {{#if this.sinStock}}border-danger{{/if}}">
            <img src="{{#if this.url_cover}}{{this.url_cover}}{{else}}/images/placeholder_libro.png{{/if}}" 
                 class="card-img-top img-fluid" 
                 alt="{{this.nombre}}"
                 style="height: 400px; object-fit: cover;">
            
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{this.nombre}}</h5>
                
                <div class="mt-auto pt-3">
                    <div class="d-flex justify-content-end align-items-center mb-3">
                        {{#if this.stock}}
                            <span class="badge bg-success">Stock: {{this.stock}}</span>
                        {{else}}
                            <span class="badge bg-danger">Agotado</span>
                        {{/if}}
                    </div>

                    {{#if this.stock}}
                        <a href="/libros/{{this.id}}/comprar" class="btn btn-primary w-100 btn-comprar">
                            <i class="bi bi-cart-plus"></i> Comprar
                        </a>
                    {{else}}
                        <button class="btn btn-secondary w-100" disabled>
                            <i class="bi bi-slash-circle"></i> Sin Stock
                        </button>
                    {{/if}}
                </div>
            </div>
        </div>
    </div>
    {{/each}}
</div>

{{#unless libros}}
<div class="alert alert-warning text-center mt-4">
    No hay libros registrados en el sistema.
</div>
{{/unless}}